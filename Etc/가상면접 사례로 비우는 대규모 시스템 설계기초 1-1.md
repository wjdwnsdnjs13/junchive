클라가 요청하면 DNS 서버에서 IP 주소를 받아서 HTTP 요청을 하게 됨.
요청을 받은 웹 서버는 HTML 페이지나 JSON 형태의 응답을 반환함.

RDBMS는 자료를 테이블과 열, 칼럼으로 표현해 SQL을 사용해 데이터를 관계에 따라 join해 합칠 수 있다.

비관계형 데이터베이스 NoSQL은 여러가지가 있음.
그 중에서도 Key-Value Store, Document Store, Column Family Store, Graph Database가 있음.

비 관계형 DB가 적합한 경우
- 아주 낮은 응답 지연시간이 요구될 때
- 다루는 데이터가 비정형이랑 관계형 데이터가 아닐 때
- 데이터(JSON, XML, yaml)를 직렬화하거나 역직렬화 할 수 있기만 하면 될 때
- 아주 많은 양의 데이터를 저장할 필요가 있을 때

스케일 업 : 수직적 확장
- 고사양 자원을 추가(더 좋은 CPU, 더 좋은 RAM 등)

스케일 아웃 : 수평적 확장
- 서버를 추가해 성능 개선

스케일 업은 단순해서 엄청 큰 장점임
단점
- 한 대의 서버에 CPU나 메모리를 무한대로 증설할 방법 X
- 장애에 대한 자동 복구 방안이나 다중화 방안을 제시하지 않음.
- 서버 장애 시 웹 사이트/앱이 완전 중단됨

로드밸런서
직접 서버로 들어가는 것이 아니라 로드밸런서 주소를 사용하고, 로드밸런서가 서버에 접근한다.
이때 보안을 위해 서버 통신에서는 private 주소를 사용할 수 있다.

DB 다중화
- Master-Slave 구조


Q) Slave 서버에 최신화 되기 전 읽을 수 있지 않나?

DB slave 서버가 master를 대체하기엔 최신 상태가 아닐 수 있음.
이때 없는 데이터는 복구 스크립트를 돌려서 추가해야함.
다중 마스터나 원형 다중화 방식을 도입하면 해결 가능하지만, 훨씬 복잡해진다.

응답 시간 개선
캐시를 붙이고 정적 파일을 CDN에 올려서 응답 시간을 개선할 수 있다.
Content Delivery Network(CDN)은 전 세계에 분산된 서버에 캐시를 저장해 두고, 사용자가 요청하면 가장 가까운 서버에서 응답을 받을 수 있게 해준다.

캐시는 비용이 높은 연산 결과나 자주 참조되는 데이터를 메모리 안에 두고 빠르게 처리될 수 있게 하는 저장소다.
요청을 받으면 우선 캐시에 있는지 확인함. 없을 경우 DB에서 읽어서 캐시에 저장한 뒤 반환함.
 -> 읽기 주도형 캐시 전략

캐시는 데이터 갱신이 자주 일어나지 않으며 참조는 빈번한 경우에 고려해볼 만 하다.
영속적으로 저장해야할 데이터를 캐시에 두는 것도 바람직하지 않다.
캐시에 보관된 데이터에 대한 만료 정책도 마련해둬야 한다.
저장소의 원본을 갱신하는 연산과 캐시를 갱신하는 연산이 단일 트랜잭션으로 처리되지 않는 경우 일관성이 깨질 수 있다.

CDN을 통해서 정적 파일을 제공하면 응답 시간을 개선할 수 있다.
CDN은 전 세계에 분산된 서버에 캐시를 저장해 두고, 사용자가 요청하면 가장 가까운 서버에서 응답을 받을 수 있게 해준다.
클라는 CDN에 정적 파일을 요청하게 되고, CDN에 없을 경우 서버에서 CDN에 저장한 후 반환한다.
비용과 적절한 만료 시한 설정, CDN 장애, 컨텐츠 무효화에 대한 대처 방안 등을 고민해봐야 한다.

Stateless 웹 계층
수평적으로 확장할 경우 사용자 세션 데이터와 같은 상태 정보를 웹 계층에서 제거해야한다.
상태 정보를 RDMS나 NoSQL에 저장하고, 필요할 때만 가져오도록 해야한다. -> 무상태 웹 계층

